{% extends "fuxi_framework/framework_base.html" %}


{% block side_bar %}

            <div class="navbar-default-sidemenu sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <li>
                            <a href="#">机器操作<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="#">重装</a>
                                    <a href="#">初始化</a>
                                    <a href="#">BeehiveAgent部署</a>
                                    <a href="#">机器下线</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->

{% endblock %}

{% block content %}

    <link rel="stylesheet" type="text/css" href="http://cdn.datatables.net/plug-ins/28e7751dbec/integration/bootstrap/3/dataTables.bootstrap.css" /> 
    <script src="http://cdn.gbtags.com/datatables/1.10.5/js/jquery.js"></script> 
    <script src="http://cdn.gbtags.com/datatables/1.10.5/js/jquery.dataTables.min.js"></script> 
    <script type="text/javascript" language="javascript" src="http://cdn.datatables.net/plug-ins/28e7751dbec/integration/bootstrap/3/dataTables.bootstrap.js"></script> 

    <div>
        <p>  
        <p>  
        <p>  
        <p>  
        <p>  
    </div>

    <div id="container"> 
        <table id="example" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="example_info"> 
            <thead> 
                <tr> 
                    <th></th> 
                    <th>job_id</th> 
                    <th>state</th> 
                    <th>user</th> 
                </tr> 
            </thead> 
            <tbody></tbody> 
            <tfoot> </tfoot> 
            <!-- tbody是必须的 --> 
        </table> 
    </div>

    <script>
        var t = $('#example').DataTable({
        ajax: {
            url: "/zhongjing/jobs/"
        },
        pageLength: 10,
        columns: [{
            "data": null //此列不绑定数据源，用来显示序号
        },
        {
            "data": "job_id"
        },
        {
            "data": "state"
        },
        {
            "data": "user"
        }],
        "columnDefs": [{
            // "visible": false,
            //"targets": 0
        },
        {
            "render": function(data, type, row, meta) {
                //渲染 把数据源中的标题和url组成超链接
                return '<a href="/auto_scale/v1/jobs/?format=json" target="_blank">' + data + '</a>';
            },
            //指定是第三列
            "targets": 1
        }
        ]
        });

    //前台添加序号
    t.on('order.dt search.dt',
        function() {
            t.column(0, {
                "search": 'applied',
                "order": 'applied'
            }).nodes().each(function(cell, i) {
                cell.innerHTML = i + 1;
            });
    }).draw();

    </script>


{% endblock %}
